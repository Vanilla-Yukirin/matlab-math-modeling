\documentclass[aspectratio=169]{beamer}
\usepackage{silence}
\WarningFilter{hyperref}{Option `driverfallback' has already been used}
\PassOptionsToPackage{unicode,CJKbookmarks}{hyperref}
\usepackage[UTF8]{ctex}      % 中文支持

% 字体与编码：确保无衬线有真正的 italic 形状，消除 OT1/cmss/... 的warning
\usepackage[T1]{fontenc}            % 西文字体用 T1 编码
\usepackage[default,scale=0.95]{sourcesanspro} % 无衬线换为 Source Sans Pro（含 italic）
% \usepackage[default]{FiraSans}     % 备选：Fira Sans

% 可选：数学直立体用无衬线风格
\usefonttheme{professionalfonts}
% \usepackage{newtxsf}               % 若想数学也更贴近无衬线，可考虑 newtxsf 等；按需启用



% 主题
% https://mpetroff.net/files/beamer-theme-matrix/
\usetheme{Ilmenau}
% 颜色主题 beaver dolphin whale
\usecolortheme{whale}

% 插入图片
\usepackage{graphicx}
\graphicspath{{figs/}}  % 图片直接放到figs目录下

% 调整段间距
\setlength{\parskip}{0.5em}



% 代码高亮
\usepackage{xcolor}
\usepackage{listings}        % 简单代码渲染
\lstset{
  basicstyle=\ttfamily\small,
  numbers=none,
  breaklines=true,
  showstringspaces=false,
  keywordstyle=\color{blue},
  commentstyle=\color{gray},
  stringstyle=\color{red},
  columns=fullflexible,           % 避免宽度计算问题
  keepspaces=true,                % 保留空格
  texcl=false                     % 把%后当LaTeX
}
\lstdefinestyle{matCN}{
  basicstyle=\ttfamily\scriptsize, % 小一点的字体
  aboveskip=0.3ex,
  belowskip=0.3ex,
  language=Matlab,
  texcl=true,         % 只在 Matlab 开
  morecomment=[l]\%,  % Matlab 单行注释
  morestring=[b]"     % 声明双引号字符串，避免其中的 % 被当注释
}

% \usepackage{listingsutf8}    % 支持 utf8
\lstset{inputencoding=utf8}

% 添加代码块标题
\DeclareRobustCommand{\codeinfo}[1]{%
  \nointerlineskip
  {\raggedright\color{gray}\tiny \textbf{文件：}\nolinkurl{#1}}
}

% 信息
\title{Matlab与简单数学模型}
\author{Vanilla\_Yukirin}
\institute{\href{https://github.com/Vanilla-Yukirin/matlab-math-modeling}{Vanilla-Yukirin/matlab-math-modeling}}
\date{\today}

\begin{document}

\begin{frame}
  \titlepage
\end{frame}

\begin{frame}{目录}
  \small
  \begin{columns}[T,totalwidth=\textwidth]
    \begin{column}{0.48\textwidth}
      \tableofcontents[sections={1-3}]
    \end{column}
    \begin{column}{0.48\textwidth}
      \tableofcontents[sections={4-6}]
    \end{column}
  \end{columns}
\end{frame}



\section{Matlab介绍}
\begin{frame}[fragile]{Matlab简介}
  Matlab（矩阵实验室）是由美国MathWorks公司开发的一种高级技术计算语言和交互式环境，广泛应用于科学计算、数据分析、算法开发和可视化等领域。
\end{frame}

\subsection{Matlab与Python的对比}

\begin{frame}[fragile]{选Matlab还是Python}
\begin{columns}[T]
\column{0.5\textwidth}
\textbf{Matlab}
\begin{itemize}
  \item \textbf{内置}数学计算函数和工具箱、交互式工作区、工程领域标准。不需要会环境配置，安装好后开箱即用
  \item 文档齐全，内置帮助文档（按F12即可查看函数详细用法），相比去问AI会更加精确且全面
  \item 付费软件，昂贵的授权费，每个工具箱还需要单独付费\footnote{其实我们学校之前是有订阅过的，但是嘛……}，很多学校没有资金订阅
\end{itemize}

\column{0.5\textwidth}
\textbf{Python}
\begin{itemize}
  \item 有numpy、sklearn、matplotlib等科学计算库、jupyter notebook交互式工作区，但是需要掌握环境管理/虚拟环境（anaconda、uv、venv等）
  \item 教程齐全。作为一门\textbf{热门语言}，网络上教程很多，问LLM也能得到不错的答案
  \item 免费软件，免费、开源、社区活跃，每个人都能自由的使用（freeware）
\end{itemize}
\end{columns}
\end{frame}

\begin{frame}{为什么建议数模初学者用Matlab}
\begin{itemize}
  \item Matlab 是工程领域的计算器+画图板+方程求解器——5分钟从数据到图表，无需折腾环境配置。安装完立即算矩阵、画图、解方程，让大家专注算法而非工具；
  \item 而 Python 需要先学虚拟环境管理，对完全零基础的同学是额外负担。
  \item 装 Python 的编程环境常见的环境问题（依赖冲突、版本不兼容）往往劝退初学者。
\end{itemize}
\end{frame}

\subsection{Matlab的版本选择与安装}

\begin{frame}{Matlab版本选择}
  Matlab相邻版本之间差别并不大。且近年更新的高级功能做数模一般用不上，所以只要不用过于老的版本（推荐使用 $\ge 2016b$），语法都是通用的。
  
  \textbf{ab尾缀的含义：}
  \begin{itemize}
    \item \textbf{a}：上半年发布的版本，通常在3月份发布
    \item \textbf{b}：下半年发布的版本，通常在9月份发布
  \end{itemize}
  
  通常来说，一个a版本发布后，经过几个月的使用和反馈，MathWorks会修复一些Bug，并在同年秋季的b版本中使其更加稳定。所以\textbf{推荐使用b尾缀的版本}。
  
  接下来的教程是基于Matlab R2024b的，如果你的版本不是2024b也没有关系，操作完全相同。
\end{frame}

\begin{frame}[fragile]{Matlab安装演示}
  自行下载Matlab，网盘链接在钉钉群中
  
  如果下载速度过慢，可以带u盘下课找我拷贝
  
  \textit{TODO: 安装Matlab过程截图}
\end{frame}

\section{Matlab的基础使用}

\subsection{认识Matlab基本界面}

\begin{frame}[fragile]{Matlab基本界面介绍}
  双击Matlab图标，等待一会儿，就会出现白色的Matlab软件窗口。

  \begin{figure}
    \centering
    \includegraphics[width=0.45\textwidth]{Matlab_main.png}
    \caption{Matlab R2024b 界面示例}
  \end{figure}
\end{frame}

\begin{frame}[fragile]{Matlab基本界面介绍}
  \begin{figure}
    \centering
    \includegraphics[width=0.55\textwidth]{Matlab_main_detail.png}
    \caption{Matlab R2024b 界面示例}
  \end{figure}
\end{frame}



\begin{frame}[fragile]{Matlab工作区}
  工作区，顾名思义就是进行工作的地方。建议先更换工作区到准备好的地方，做好文件管理，不要到处都散乱着代码文件。

  通常，初次启动Matlab时，默认路径可能是\texttt{C:\textbackslash Users\textbackslash 用户名\textbackslash Documents\textbackslash MATLAB}，建议更改为自己准备好的工作目录。

  \texttt{\small个人习惯在比赛目录下新建一个code或者workspace文件夹专门用来存放代码}
\end{frame}

\begin{frame}[fragile]{更换工作区目录}
  \begin{figure}
    \centering
    \includegraphics[width=0.50\textwidth]{Matlab_openfolder.png}
    \caption{更换当前工作目录}
  \end{figure}
\end{frame}




\begin{frame}[fragile]{命令行窗口}
  命令行窗口的左上角会有三个大于号：\texttt{\lstinline|>>|}，表示等待用户输入命令。

  命令行窗口是 Matlab 最常用的窗口，用于输入命令、执行命令、查看结果。

  可以直接在命令行窗口中写一些简单的代码，也可以把它当作一个\textbf{全能计算器}。

  \begin{lstlisting}[style=matCN]
>> format long % set long format
>> pi
ans =
   3.141592653589793
>> pi^2
ans =
   9.869604401089358
>> 
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{命令行窗口}
  \begin{figure}
    \centering
    \includegraphics[width=0.4\textwidth]{Command.png}
    \caption{命令行窗口}
  \end{figure}
\end{frame}

\begin{frame}[fragile]{文件命名规范}
  MATLAB 文件名必须以字母开头，最多包含 63 个字母数字字符或下划线。

  也就是说：
  \begin{itemize}
    \item 不能以数字开头
    \item 不能包含中文
    \item 不能用减号 \texttt{-}，应使用下划线 \texttt{\_}
  \end{itemize}

养成良好的文件命名习惯，可以帮助我们在数模比赛中快速的找到文件。在数模比赛中，由于会有很多道子问题，所以个人推荐这样命名，既规整又有含义：
  \begin{itemize}
    \item \texttt{problem1\_GA.m} — 问题一，使用遗传算法
    \item \texttt{problem2\_draw.m} — 问题二，画图相关代码
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{运行代码}
  新建 \texttt{HelloWorld.m} 文件，写入如下内容，然后用编辑器的运行按钮或命令行运行。

  \codeinfo{HelloWorld.m}
  \begin{lstlisting}[style=matCN]
clc; % clear console
clear; % clear variables
n=input("Please input a number: ");
n
fprintf("Hello, World!\n")
  \end{lstlisting}

  常见运行方式：
  \begin{enumerate}
    \item 上方的“运行”按钮
    \item 选中代码，按 F9（在命令行中执行所选）
    \item 在行号左侧点击出现的运行蓝条
  \end{enumerate}
\end{frame}

\begin{frame}[fragile]{运行代码示例}
  \begin{minipage}[b]{0.32\textwidth}
    \centering
    \includegraphics[height=0.3\textheight]{Run_code1.png}\\[0.4em]
    \small (a) 运行按钮
  \end{minipage}\hfill
  \begin{minipage}[b]{0.32\textwidth}
    \centering
    \includegraphics[height=0.3\textheight]{Run_code2.png}\\[0.4em]
    \small (b) 选中代码按F9/右键运行
  \end{minipage}\hfill
  \begin{minipage}[b]{0.32\textwidth}
    \centering
    \includegraphics[height=0.3\textheight]{Run_code3.png}\\[0.4em]
    \small (c) 左侧点击运行（运行段）
  \end{minipage}
  \vspace{0.6em}

  运行后命令行会显示“\texttt{Please input a number: }”，
  
  输入一个数字并回车后，会输出你输入的数字并打印 \texttt{Hello, World!}。

\end{frame}

\subsection{Matlab基本语法}

\begin{frame}[fragile]{从矩阵开始}
  Matlab 的名字是“矩阵实验室”，内部数据以矩阵为主，直接面向矩阵进行运算。
  
  \codeinfo{Section2_1_matrix.m}
  \begin{lstlisting}[style=matCN]
clc;clear; % 清空控制台和变量

A=[1,2,3;4,5,6;7,8,9] % 创建矩阵A，是一个3行3列的矩阵
% [] 表示构建一个矩阵
% 逗号或空格用来分隔同一行不同列的元素
% 分号用来分隔不同行（同一列）的元素，或者说表示换行
A(1:2,:) % 拆：取A的前两行
% 矩阵后面连着一个括号，代表取矩阵的某个部分
% 第一个参数 1:2 表示“从1到2”，即第1行和第2行
% 第二个参数 : 表示“所有”
% 所以这里取的是A的前两行，所有列
B=[A;10,11,12] % 添：在A的下面添加一行新数据，构成新矩阵B
% 把新行 [10 11 12] 用分号和A连接，表示把新行添加到A的下面
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{向量是特殊的矩阵}
  向量是特殊的矩阵，可以看作是只有一行或者一列的矩阵。

  \texttt{\scriptsize同理，标量可以看作是1行1列的矩阵。这也是为什么说Matlab中万物皆矩阵}

  \codeinfo{Section2_2_vector.m}
  \begin{lstlisting}[style=matCN]
clc;clear
x = [1 2 3 4 5]          % 一行五列 → 行向量
y = [1; 2; 3; 4; 5]      % 五行一列 → 列向量
a = [1,2,3,4,5,6,7,8,9]  % 手写会很累
b = 1:1:10               % 从1开始，步长1，到10结束 → [1 2 3 4 5 6 7 8 9 10]
d = 0:2:20               % 从0开始，步长2，到20结束 → [0 2 4 6 8 10 12 14 16 18 20]
e = 10:-1:1              % 从10开始，步长-1，到1结束 → [10 9 8 7 6 5 4 3 2 1]
  \end{lstlisting}
  步长可正可负，会构造一个等差数列。可以用这种方法快速的构造等间隔的数轴坐标、时间序列等。
\end{frame}


\begin{frame}[fragile]{常用的矩阵创建方法}
  \codeinfo{Section2_3_create.m}
  \begin{lstlisting}[style=matCN]
clc;clear
a=[1,2,3,4,5,6,7,8,9] % 创建一个向量
aa=a'                 % 加'是转置，行→列
b=[1,2,3;4,5,6;7,8,9] % 创建一个矩阵
c=1:1:10              % 创建一个从1到10的向量
e=eye(4)              % 生成4维（4*4）的单位矩阵I（对角线为1）
z=zeros(1,4)          % 生成1行4列的全零矩阵
o=ones(4,1)           % 生成4行1列的全1矩阵
% 随机矩阵
r=rand(4)             % 生成4*4的0-1范围内的随机矩阵
rn=randn(4)           % 生成4*4的均值为0，方差为1的正态分布随机矩阵
ri=randi([1,10],2,4)  % 生成2*4的随机整数矩阵（1到10之间）
% 对角矩阵
d=diag([1,2,3])       % 对角线上是1,2,3的3×3矩阵
d=diag(b)             % 提取b的对角线元素
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{常用的矩阵创建方法}
  \codeinfo{Section2_3_create.m}
  \begin{lstlisting}[style=matCN]
% 三角矩阵
U=triu(b)             % 上三角矩阵（下三角变为0）
L=tril(b)             % 下三角矩阵（上三角变为0）
% 生成相同维度的矩阵
size(b)               % 会输出b的尺寸[3 3]
f=zeros(size(b))      % 生成一个和b矩阵尺寸一样的矩阵
% f=zeros(size(b,1),size(b,2)) 和 f=zeros(height(b),width(b)) 同理
% 重复矩阵
R=repmat([1 2],2,3)   % 把[1 2]重复成2行3列块
% 常用序列
x=linspace(0,10,100)  % 0到10之间等距100个点，无需手动设置步长
y=logspace(1,3,5)     % $10^1$到$10^3$之间对数间隔5个点
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{变量名和ans} % 变量名和ans
  在刚刚的例子中，我们创建了很多的变量，比如R，x，y等等。

  在Matlab中，变量名可以用字母和数字，但是不能以数字开头。

  如果某一行只是输出结果，但没有给任何变量赋值，那么结果会自动存储在一个名为\texttt{ans}的变量中。

  \codeinfo{Section2_4_variable.m}
  \begin{lstlisting}[style=matCN]
clc;clear;
3+5          % 没有变量名 → 自动存到 ans
ans          % 输出ans查看结果 → 8

score=95     % 有名字 → 存到 score
score        % 查看 → 95
ans          % 此时ans未被修改，还是8
  \end{lstlisting}
\end{frame}


\begin{frame}[fragile]{分号与常用输出方式} % 分号与常用输出方式
  在之前的示例中，可以发现：
  \begin{itemize}
    \item 如果行末不存在分号，那么Matlab会自动输出该行的结果；
    \item 如果行末有分号，则不会输出结果。
  \end{itemize}
  
  \codeinfo{Section2_5_output.m}
  \begin{lstlisting}[style=matCN]
clc;clear;
% 使用分号选择性的输出运算结果
A=[1,2];B=[3,4]; % 不展示A和B
C=A+B            % 展示C（会输出矩阵名）
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{分号与常用输出方式}
  使用“无分号”来输出变量，输出的格式较为混乱且不可控（好处是啥都能展示）。在实际的运算中，我们通常会希望仅部分结果，或者按照某种格式输出结果。
  
  下面介绍几种更优雅的输出方式：
  \begin{itemize}
    \item disp() 函数
    \item disp() 与num2str() 函数结合
    \item fprintf() 函数
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{分号与常用输出方式}
  1. disp() 函数

  disp可以说是 MATLAB中的最常用的输出方式。简单直接，适合快速查看变量内容。

  相比于“无分号”直接输出，disp不会输出变量名，只会输出变量的值，更加简洁。

  \codeinfo{Section2_5_output.m}
  \begin{lstlisting}[style=matCN]
% 1. disp
disp(A);         % 打印矩阵（不会输出矩阵名）
disp(pi);        % 打印标量（不会输出变量名）
disp("Ciallo~"); % 打印字符串
% 简单直接，适合快速查看
% 不能混合输出文字和数字
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{分号与常用输出方式}
  2. disp() 与 num2str() 函数结合

  disp() 函数也可以和 num2str() 函数结合使用，将数字转为字符串再输出。

  \codeinfo{Section2_5_output.m}
  \begin{lstlisting}[style=matCN]
% 2. num2str
x = 3.14;
disp(['The value of pi is: ' num2str(x)]) % 注意各个字符串之间需要空格/逗号
% 本质上是字符数组的拼接
  \end{lstlisting}

  将会输出：\texttt{The value of pi is: 3.14}
\end{frame}

\begin{frame}[fragile]{分号与常用输出方式}
  3. fprintf() 函数

  fprintf函数是Matlab中功能最强大的输出函数，类似于C语言中的printf函数。

  其整体的结构是：\texttt{fprintf('格式字符串', 变量1, 变量2, ...)}。

  常用的格式符有：\texttt{\%d}、\texttt{\%f}、\texttt{\%s}、\texttt{\%c}、\texttt{\%e}、\texttt{\%g}、\texttt{\%\%}等。

  比如：\texttt{\%.2f}表示输出浮点数并保留两位小数。\texttt{\%d}表示输出整数。

  \codeinfo{Section2_5_output.m}
  \begin{lstlisting}[style=matCN]
% 3. fprintf
x = 3.1415926535;
fprintf('The value of pi rounded to two decimal places is: %.2f\n', x)
fprintf('Today''s temperature is: %d\n', 25) % 需要加\textbackslash n，fprintf不会自动换行
  \end{lstlisting}


\end{frame}


\begin{frame}[fragile]{矩阵的基本运算} % 转置 加减点叉乘除幂
  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Matlab中的循环与条件语句}
  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Matlab中的函数定义与调用}
  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}


\begin{frame}[fragile]{} % 符号计算？数值积分？
  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}

\subsection{Matlab基础绘图}
\begin{frame}[fragile]{绘图的作用}
  绘图是数模与科研中必不可少的一环。
  
  绘图可以更方便的观察数据，也可以进行简单的数据处理。模型求解也通常需要用图像进行辅助展示。

  % 短的绘图代码，绘制比较精彩的图像
  \begin{lstlisting}[style=matCN]


  \end{lstlisting}

  % 绘图效果展示
  \begin{figure}
  \centering
  % \includegraphics[width=0.8\textwidth]{Plot_example.png}
  \end{figure}
\end{frame}

\begin{frame}[fragile]{}

  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}





\section{Matlab简单应用} % 给两道题目

\subsection{复杂矩阵的构造} % 简单的题目

\begin{frame}[fragile]{问题1}
  请用分别一行代码，生成以下矩阵：
  \begin{itemize}
    \item 3行4列的随机矩阵
    \item 3行10列的矩阵，元素为1到30的连续整数
    \item 下三角部分为[0,1]上是均匀随机数，其余为全1的5行5列矩阵
  \end{itemize}

  （提示：请使用help自学reshape函数）
\end{frame}

\begin{frame}[fragile]{问题1答案}
  \codeinfo{Section3_1.m}
  \begin{lstlisting}[style=matCN]
% 3行4列的随机矩阵
A = rand(3, 4)

% 3行10列的矩阵，元素为1到30的连续整数
B = reshape(1:30, 3, 10)

% 下三角部分为[0,1]上是均匀随机数，其余为全1的5行5列矩阵
C = ones(5) + tril(rand(5)-1)
  \end{lstlisting}
\end{frame}




\subsection{递推加速} % 斐波那契+矩阵加速+矩阵快速幂

\begin{frame}[fragile]{}
  
  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{}

  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}


\subsection{数值计算} % 方程求解+积分+微分

\begin{frame}[fragile]{}

  \begin{lstlisting}[style=matCN]


  \end{lstlisting}
\end{frame}







\section{简单数学模型的介绍}
\subsection{线性回归}



\subsection{线性规划模型与求解}


\subsection{复杂规划模型与启发式算法求解}


\section{课后习题}




\section{总结与答疑}


\begin{frame}[fragile]{总结}
\small
  \begin{columns}[T,totalwidth=\textwidth]
    \begin{column}{0.48\textwidth}
      \tableofcontents[sections={1-3}]
    \end{column}
    \begin{column}{0.48\textwidth}
      \tableofcontents[sections={4-6}]
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]{总结}
今天晚上和周六周日，我会在数模5群里面看大家的问题

大家可以把不懂的地方发到群里，我和数模协会的同学会尽量帮大家解答
\end{frame}














% 新增：行内等宽（不需要 fragile）
\begin{frame}{行内等宽：\texttt{...}}
这里演示行内等宽：\texttt{for i = 1:n}，适合短的、简单的代码或变量名。
\end{frame}

% 新增：listings 的行内（颜色来自 lstset）
\begin{frame}[fragile]{使用 \lstinline|...|}
演示 listings 行内：\lstinline|disp('hello')|，适合需要 listings 语法高亮的短代码片段。
\end{frame}

% 新增：单行短代码块（verbatim）
% \begin{frame}[fragile]{单行短代码块（verbatim）}
% 单行或几行的简短代码可以用 verbatim 环境：
% \begin{verbatim}
% x = 1; y = x^2; disp(y)
% \end{verbatim}
% \end{frame}

\end{document}